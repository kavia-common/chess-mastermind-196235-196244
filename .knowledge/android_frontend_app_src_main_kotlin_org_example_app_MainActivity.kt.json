{"is_source_file": true, "format": "Kotlin", "description": "The file defines the MainActivity class for an Android chess application, handling UI interactions, game state management, user input, AI move execution, and rendering logic.", "external_files": ["R.layout.activity_main", "org.example.app.core.ChessGame", "org.example.app.core.GameMode", "org.example.app.core.PieceType", "org.example.app.core.PlayerColor", "org.example.app.core.Square", "org.example.app.core.move.Move", "org.example.app.core.notation.SimpleNotation", "org.example.app.core.persistence.GamePersistence", "org.example.app.engine.ai.MinimaxAi", "org.example.app.ui.ChessboardView", "android.os.Bundle", "android.widget.Button", "android.widget.SeekBar", "android.widget.TextView", "androidx.appcompat.app.AlertDialog", "androidx.recyclerview.widget.LinearLayoutManager", "androidx.recyclerview.widget.RecyclerView", "java.util.concurrent.Executors", "java.util.concurrent.atomic.AtomicBoolean"], "external_methods": ["GamePersistence.loadLastGame", "GamePersistence.saveLastGame", "ChessGame.newGame", "ChessGame.undoLastPly", "ChessGame.tryMakeMove", "ChessGame.isGameOver", "ChessGame.winner", "ChessGame.isInCheck", "ChessGame.capturedBy", "SimpleNotation.toSimpleAlgebraic", "PieceType.name", "PieceType.lowercase", "PieceType.uppercase", "Square", "PlayerColor", "Move", "AlertDialog.Builder.setTitle", "AlertDialog.Builder.setSingleChoiceItems", "AlertDialog.Builder.setItems", "AlertDialog.Builder.setCancelable", "AlertDialog.Builder.setPositiveButton", "AlertDialog.Builder.setNegativeButton", "AlertDialog.Builder.show", "Handler.post", "SeekBar.setOnSeekBarChangeListener", "RecyclerView.setLayoutManager", "RecyclerView.setAdapter", "MoveHistoryAdapter.submitMoves", "MoveHistoryAdapter", "ChessboardView.setPosition", "ChessboardView.setSelectedSquare", "ChessboardView.setHighlightedMoves", "ChessboardView.clearSelection", "ChessboardView.invalidate", "ChessboardView.onSquareTapped"], "published": ["MainActivity"], "classes": [{"name": "MainActivity", "description": "Main activity managing UI, user interactions, game state, and AI moves for the chess app."}], "methods": [{"name": "onCreate", "description": "Initializes the activity, sets up UI components, restores previous game state, and triggers AI if needed."}, {"name": "onStop", "description": "Saves the current game state when the activity is stopped."}, {"name": "bindViews", "description": "Binds UI components to class variables for later use."}, {"name": "setupMoveList", "description": "Configures the move history RecyclerView and its adapter."}, {"name": "setupControls", "description": "Sets up button click handlers and control interactions for starting new game, undo, mode selection, and difficulty adjustment."}, {"name": "setupBoardCallbacks", "description": "Configures callback for tapping squares on the chessboard."}, {"name": "handleSquareTap", "description": "Handles user taps on board squares, managing selection and move attempts."}, {"name": "promptPromotion", "description": "Displays a dialog to select a piece type for pawn promotion."}, {"name": "attemptPlayMove", "description": "Attempts to execute a move, updates the UI, and triggers game end checks."}, {"name": "maybeTriggerAi", "description": "Starts AI move calculation asynchronously if applicable."}, {"name": "renderAll", "description": "Updates UI elements to reflect current game state."}, {"name": "showGameEndIfNeeded", "description": "Displays game over dialog if game has ended."}], "calls": ["GamePersistence.loadLastGame", "GamePersistence.saveLastGame", "ChessGame.newGame", "ChessGame.undoLastPly", "ChessGame.tryMakeMove", "ChessGame.isGameOver", "ChessGame.winner", "ChessGame.isInCheck", "ChessGame.capturedBy", "SimpleNotation.toSimpleAlgebraic", "PromptPromotion", "ai.findBestMove", "uiHandler.post", "moveAdapter.submitMoves", "moveAdapter", "chessboardView.setPosition", "chessboardView.setSelectedSquare", "chessboardView.setHighlightedMoves", "chessboardView.clearSelection", "chessboardView.invalidate", "AlertDialog.Builder.show", "Handler.post"], "search-terms": ["MainActivity", "AI move", "chess game UI", "player move handling", "promotion dialog", "move history", "game state restore", "android activity chess", "AI search depth", "chessboard view tap"], "state": 2, "file_id": 8, "knowledge_revision": 42, "git_revision": "", "revision_history": [{"28": ""}, {"40": ""}, {"41": ""}, {"42": ""}], "hash": "e5dcb8cf07a84605a4274110514e9cc5", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt"}